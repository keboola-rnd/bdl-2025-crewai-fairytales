find_fairytale:
  description: >
    Find book in Keboola storage using book id "{inspiration_book_id}". Your steps are:
     - search for bucket "mysql-fairytales-joined"
     - find table details for table "books_authors_summaries_complete" in Keboola storage
     - use only id from book to build a query
     - use summary of book for inspiration
     - make extra sure you will make maximum effort to query the table if input is not empty
     - - list all tables in Keboola storage to find the correct table
     - - if your query fails try to repair it and try again multiple times until you succeed

  expected_output: >
    An inspiration book summary which will be provided to fairytale_planner agent in next step
  agent: fairytale_finder


plan_fairytale:
  description: >
    Create a plan for a fairytale with given inputs 
    Character name: {main_character}
    Location: {location}
    Main problem: {main_problem}

    If inspiaration book is provided from find_fairytale agent you should:
     - use summary of book for inspiration and continue with the plan
     
  expected_output: >
    A plan for a fairytale. Do not write the story, only plan it.
    Last line should be summary of book used for inspiration.
  agent: fairytale_planner

write_fairytale:
  description: >
    Write a fairytale with input given from plan_fairytale agent
    Fairytable should be max 3 paragraphs long.
  expected_output: >
    A fairytale story. Do not plan the story, only write it.
  agent: fairytale_writer


translate_fairytale:
  description: >
    Translate the fairytale story to given language: {target_language}
  expected_output: >
    A fairytale story in given language. Use markdown format and keep the story as it is.
  agent: fairytale_translator